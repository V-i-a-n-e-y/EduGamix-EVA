<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EduGamix - Nivel 1</title>
  <link rel="stylesheet" href="nivel1-juego1.css">
</head>
<body>

  <!-- 🔹 Encabezado -->
  <header>
    <div class="logo">
      <a href="index.html">
        <img src="img/EduGamix.jpg" alt="EduGamix Logo" height="150">
      </a>
    </div>
    <h1>Nivel 1</h1>
    <div class="user-info">
      <span class="icon" title="Inicio" onclick="window.location.href='inicio.html';">🏠</span>
      <span class="icon" title="Notificaciones" onclick="alert('Notificaciones');">🔔</span>
      <span class="icon" title="Difusión" onclick="window.location.href='ini2.html';">📢</span>
      <div class="user-info">
        <i class="fas fa-user-circle"></i>
        <span id="username">Nombre de Usuario</span> | <span id="useremail">correo@ejemplo.com</span>
        <a class="logout-link" onclick="logout()">Cerrar sesión</a>
      </div>
      <span class="icon" title="Perfil" onclick="window.location.href='miespacio.html';">👤</span>
    </div>
  </header>

  <!-- 🔹 Script para cargar nombre y correo desde localStorage -->
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      const username = localStorage.getItem("username");
      const useremail = localStorage.getItem("useremail");
      
      if (username) document.getElementById("username").textContent = username;
      if (useremail) document.getElementById("useremail").textContent = useremail;
    });
  </script>

  <!-- 🔹 Contenedor del Juego -->
  <div class="game-container">
    <div class="challenge-header">Desafío 1: Bingo de Ecuaciones Lineales</div>
    
    <div class="challenge-info">
      <p>⏳ TIEMPO: <span id="timer">00:00</span></p>
      <p>⭐ Puntos obtenidos: <span id="points">0</span></p>
    </div>

    <!-- 🔹 Modals (Ventanas Emergentes) -->
    
    <!-- 🟢 Modal de Pistas -->
    <div id="retroalimentacion-modal" class="modal">
      <div class="modal-content">
        <span class="close" onclick="cerrarModal('retroalimentacion-modal')">&times;</span>
        <p>Pista: Analiza las ecuaciones detenidamente.</p>
      </div>
    </div>

    <!-- 🎉 Modal de Felicitaciones -->
    <div id="felicitacion-modal" class="modal">
      <div class="modal-content">
        <h2>🎉 ¡Felicidades! 🎉</h2>
        <p>¡Has completado el desafío!</p>
        <p>Puntaje final: <span id="final-score"></span></p>
        <p>Tiempo total: <span id="final-time"></span></p>
        <img src="img/gami.jpg" alt="Gami" class="avatar-modal" />
        <button onclick="reiniciarJuego()">Reiniciar Juego</button>
        <button onclick="window.location.href='modo-juego-n2.html';">Regresar</button>
      </div>
    </div>

    <!-- 🚫 Modal de Fin del Juego -->
    <div id="fin-juego-modal" class="modal">
      <div class="modal-content">
        <h2>🎮 Fin del juego</h2>
        <p>Puntaje final: <span id="final-score-fj"></span></p>
        <p>Tiempo total: <span id="final-time-fj"></span></p>
        <img src="img/radicux.jpg" alt="Avatar">
        <button onclick="reiniciarJuego()">Reiniciar Juego</button>
        <button onclick="window.location.href='inicio.html';">Salir</button>
      </div>
    </div>

    <!-- ❌ Modal de Error -->
    <div id="error-modal" class="modal">
      <div class="modal-content">
        <span class="close" onclick="cerrarModal('error-modal')">&times;</span>
        <h2>⚠️ Incorrecto. Intenta de nuevo.</h2>
        <p>¡Cuidado! Solo se permiten 2 errores.</p>
        <img src="img/radicux.jpg" alt="Avatar de Error" class="avatar-error" />
      </div>
    </div>

    <!-- 🔹 Contenido del Juego -->
    <div class="content">
      <h2>El sistema de ecuaciones es:</h2>
      <div id="equation">x + y = 5, 2x - y = 1</div>
      <button onclick="prevEquation()">Regresar</button>
      <button onclick="nextEquation()">Siguiente</button>
    </div>

    <!-- 📝 Botón de Pistas -->
    <img src="img/xilo-avatar.jpg" alt="Avatar" class="avatar-feedback" onclick="abrirModal('retroalimentacion-modal')" title="Haz clic para obtener una pista">
  </div>

  <!-- 🔹 Scripts -->
  <script src="nivel1-juego1.js"></script>
  <script>
    /**
     * Abre un modal específico
     * @param {string} id - ID del modal a abrir
     */
    function abrirModal(id) {
      document.getElementById(id).style.display = "flex";
    }

    /**
     * Cierra un modal específico
     * @param {string} id - ID del modal a cerrar
     */
    function cerrarModal(id) {
      document.getElementById(id).style.display = "none";
    }

    /**
     * Reinicia el juego recargando la página
     */
    function reiniciarJuego() {
      location.reload();
    }

    /**
     * Cierra la sesión del usuario y redirige al login
     */
    function logout() {
      localStorage.removeItem("username");
      localStorage.removeItem("useremail");
      window.location.href = "login.html";
    }

    /**
     * Muestra el modal de error por unos segundos
     */
    function mostrarError() {
      abrirModal("error-modal");
      setTimeout(() => cerrarModal("error-modal"), 3000);
    }
  </script>

</body>
</html>
