<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduGamix</title>
    <link rel="stylesheet" href="nivel 1 juego1.css">
</head>
<body>
    <!-- Encabezado -->
    <header>
        <div class="logo">
            <a href="index.html" target="_blank">
                <img src="img/EduGamix.jpg" alt="EduGamix Logo" height="150">
            </a>
        </div>
        
        <h1> Nivel 1</h1>
        <div class="user-info">
            <span class="icon" title="Inicio" onclick="window.location.href='inicio.html';">üè†</span>
            <span class="icon" title="Notificaciones" onclick="alert('Notificaciones');">üîî</span>
            <span class="icon" title="Difusi√≥n" onclick="window.location.href='ini2.html';">üì¢</span>
            
            <div class="user-info">
                <i class="fas fa-user-circle" style="font-size: 24px; margin-right: 8px;"></i>
                <span id="username">Nombre de Usuario</span> | <span id="useremail">correo@ejemplo.com</span>
                <a class="logout-link" title="Cerrar sesi√≥n" onclick="logout()">Cerrar sesi√≥n</a>
            </div>
            <span class="icon" title="Perfil" onclick="window.location.href='miespacio.html';">üë§</span>
        </div>
    </header>
    <script>

        // Cargar el nombre de usuario y correo desde localStorage
        document.addEventListener("DOMContentLoaded", function() {
            const username = localStorage.getItem("username");
            const useremail = localStorage.getItem("useremail");
            
            if (username) {
                document.getElementById("username").textContent = username;
            }
            if (useremail) {
                document.getElementById("useremail").textContent = useremail;
            }
        });
    </script>

    <!-- Contenido Principal -->
    <div class="game-container">
        
        <div class="challenge-header">
            <h2> Bingo de Ecuaciones Lineales</h2>
        </div>
        <div class="challenge-info">
            <p>‚è≥ Tiempo: <span id="timer">00:00</span></p>
            <p>Puntos obtenidos: <span id="points">0</span></p>
            <p>Intentos restantes: <span id="attempts">3</span></p>
        </div>

        <!-- Contenido del juego -->
        <div class="content">
            <div class="equation-container">
                <div id="equation-container">
                    <h2>El sistema de ecuaciones es:</h2>
                    <ul id="equation-list"></ul>
                </div>
                <div id="equation" class="equation">x + y = 5, 2x - y = 1</div>
                <button id="prev-btn" onclick="prevEquation()">Regresar</button>
                <button id="next-btn" onclick="nextEquation()">Siguiente</button>
            </div>

            <div class="bingo-container">
                <h2>Bingo</h2>
                <div id="bingo-board" class="bingo-board"></div>
            </div>
        </div>

        <!-- Intentos y botones -->
        <div class="attempts-info">
            <span id="attempts">Intentos restantes: 3</span>
            <button onclick="feliBingo(); reproducirSonidoTrompetas()">¬°Bingo!</button>
            <button onclick="restartGame()">Iniciar - Volver a Empezar</button>
        </div>

        <!-- Modal de Felicitaci√≥n -->
        <div id="felicitacion-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <h2>üéâ Felicidades üéâ</h2>
                <p>¬°Has completado el desaf√≠o Explorando Soluciones Lineales!</p>
                <p>Puntaje final: <span id="final-score"></span></p>
                <p>Tiempo total: <span id="final-time"></span></p>
                <img src="img/gami.gif" alt="Gami" class="avatar-modal" />
                <button id="restart-btn">Reiniciar Juego</button>
                <button id="modo-btn" onclick="window.location.href='modo juego n1.html';">Regresar</button>
            </div>
        </div>

        <!-- Modal de Retroalimentaci√≥n -->
        <div id="feedback-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <span class="close" onclick="closeFeedback()">&times;</span>
                <h2>Retroalimentaci√≥n</h2>
                <table id="feedback" class="feedback-table">
                    <thead>
                        <tr>
                            <th>Ecuaci√≥n</th>
                            <th>Soluci√≥n</th>
                            <th>Tu respuesta</th>
                        </tr>
                    </thead>
                    <tbody id="feedback-table-body"></tbody>
                </table>
            </div>
        </div>

        <!-- Bot√≥n para abrir retroalimentaci√≥n manualmente -->
        <button onclick="showFeedbackModal()">Ver Retroalimentaci√≥n</button>

    </div>

    <!-- Scripts -->
    <script src="nivel 1 juego1.js"></script>
    <script>
        let ecuaciones = [
            { ecuacion: 'x + y = 2  2x + y = 5', solucion: 'x = 3 y = -1', respuestaUsuario: '' },
            { ecuacion: '2x + 4y = 0  x + 2y = 4', solucion: 'x = 2 y = -1', respuestaUsuario: '' },
            { ecuacion: '3x + 2y = 11  4x + 5y = 7', solucion: 'x = 3 y = 1', respuestaUsuario: '' },
            { ecuacion: '2x + 3y = -1  3x + 4y = 0', solucion: 'x = 4 y = -3', respuestaUsuario: '' },
            { ecuacion: 'x + 2y = 5  3x - 2y = 19', solucion: 'x = 7 y = 1', respuestaUsuario: '' }
        ];

        let currentEquationIndex = 0;

        // Funci√≥n para mostrar la siguiente ecuaci√≥n
        function nextEquation() {
            if (currentEquationIndex < ecuaciones.length - 1) {
                currentEquationIndex++;
                document.getElementById('equation').textContent = ecuaciones[currentEquationIndex].ecuacion;
            }
        }

        // Funci√≥n para mostrar la ecuaci√≥n anterior
        function prevEquation() {
            if (currentEquationIndex > 0) {
                currentEquationIndex--;
                document.getElementById('equation').textContent = ecuaciones[currentEquationIndex].ecuacion;
            }
        }

        // Funci√≥n para iniciar el juego de nuevo
        function restartGame() {
            puntos = 0;
            intentos = 3;
            currentEquationIndex = 0;
            document.getElementById('points').textContent = puntos;
            document.getElementById('attempts').textContent = intentos;
            document.getElementById('felicitacion-modal').style.display = 'none';
            document.getElementById('equation').textContent = ecuaciones[currentEquationIndex].ecuacion;
        }

        // Funci√≥n para mostrar el modal de retroalimentaci√≥n
        function showFeedbackModal() {
            const modal = document.getElementById('feedback-modal');
            const feedbackTableBody = document.getElementById('feedback-table-body');
            feedbackTableBody.innerHTML = ""; // Limpiar la tabla antes de agregar las nuevas filas

            // Iterar sobre las ecuaciones y mostrar la retroalimentaci√≥n
            ecuaciones.forEach((item, index) => {
                const row = document.createElement("tr");

                // Mostrar ecuaci√≥n enumerada
                const ecuacionCell = document.createElement("td");
                ecuacionCell.textContent = `Ecuaci√≥n ${index + 1}: ${item.ecuacion}`;
                row.appendChild(ecuacionCell);

                const solucionCell = document.createElement("td");
                solucionCell.textContent = item.solucion;
                row.appendChild(solucionCell);

                const respuestaCell = document.createElement("td");
                respuestaCell.textContent = item.respuestaUsuario ? item.respuestaUsuario : "No respondida";
                row.appendChild(respuestaCell);

                feedbackTableBody.appendChild(row);
            });

            modal.style.display = 'block';
        }

        // Funci√≥n para cerrar el modal de retroalimentaci√≥n
        function closeFeedback() {
            const modal = document.getElementById('feedback-modal');
            modal.style.display = 'none';
        }
    </script>
</body>
</html>
